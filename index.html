<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Feliz cumple Hanna</title>
<style>
  :root{
    --bg1:#FF69B4; 
    --bg2:#FF9AD7; 
    --text:#4a1942; /* Color de texto oscuro, seguro */
    --muted:rgba(74,25,66,0.7);
    
    --pure-white: #FFFFFF;
    --pure-neon-pink: #FF10F0; 
    --pure-pastel-pink: #FFB6C1; 
    
    --shadow-light:rgba(10,10,18,0.08);
    --shadow-medium:rgba(200,60,120,0.12);
    
    --elegant-gold:#D4AF37; 

    --gift-bg-light-grey: #e0e0e0; 
    --gift-border-light-grey: #c0c0c0;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;
    /* FUENTE DE SISTEMA GARANTIZADA PARA M√ÅXIMA COMPATIBILIDAD */
    font-family:system-ui,-apple-system,'Segoe UI',Roboto,Arial,sans-serif; 
    background:linear-gradient(135deg,var(--bg1),var(--bg2));
    color:var(--text);-webkit-font-smoothing:antialiased;overflow:auto}
  
  .wrap{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:28px;position:relative}
  .card{width:100%;max-width:880px;background:rgba(255,255,255,0.85);backdrop-filter:blur(10px);border-radius:24px;padding:36px 28px;box-shadow:0 18px 50px var(--shadow-light);position:relative;overflow:hidden;z-index:10}
  
  .estrellas-capa {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 5;
  }
  #fondo-estrellas { z-index: 5; }
  #frente-estrellas { z-index: 15; }
  
  .kitty-wrap{width:220px;height:220px;border-radius:50%;background:rgba(255,255,255,0.9);box-shadow:0 10px 30px rgba(255,105,180,0.25);position:relative;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s ease;z-index:2;margin:0 auto}
  .kitty-wrap:hover{transform:scale(1.05);box-shadow:0 15px 40px rgba(255,105,180,0.4)}
  .kitty{width:160px;height:160px;position:relative}
  .sparkle{position:absolute;pointer-events:none}
  .center{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center}
  
  /* CAMBIO CLAVE: Cambiado de 'display:none' a 'display:flex' para asegurar que la tarjeta aparezca */
  .reveal{display:flex;margin-top:20px;width:100%;flex-direction:column;align-items:center;}
  
  .gift-box{background:var(--gift-bg-light-grey);border:2px solid var(--gift-border-light-grey);border-radius:18px;position:relative;width:100%;padding:15px;box-shadow:0 0 10px rgba(0,0,0,0.1)}
  .gift-lid{height:30px;background:var(--pure-neon-pink);border:2px solid var(--gift-border-light-grey);border-bottom:none;border-radius:18px 18px 0 0;position:absolute;top:-30px;left:-2px;right:-2px;transform:translateY(0);transition:transform 0.7s cubic-bezier(0.68,-0.55,0.265,1.55), box-shadow 0.7s ease}
  .gift-body{padding-top:10px}
  .gift-open .gift-lid{transform:translateY(-100px) rotate(-10deg);box-shadow:0 15px 30px rgba(0,0,0,0.2)}
  .glowing{box-shadow:0 0 15px var(--pure-neon-pink), 0 0 30px var(--pure-pastel-pink)}
  
  .top-text{position:relative;z-index:2;font-weight:700;color:var(--muted);font-size:20px;text-align:center;margin-bottom:12px}
  
  /* ESTILOS SIN BRILLO (LEGIBILIDAD GARANTIZADA) */
  .neon{
    font-family: system-ui, sans-serif; 
    font-size:30px;
    font-weight:800;
    color:var(--text); /* Color oscuro normal */
    padding:8px 16px;
    border-radius:10px;
    display:inline-block;
    background:none; 
    text-shadow: none; /* SIN BRILLO */
    filter:none; 
    transition:all .3s ease;
  }
  
  @keyframes neonColors {
    0% { color: var(--text); }
    50% { color: var(--pure-neon-pink); } 
    100% { color: var(--text); }
  }
  .neon.animated{animation:neonColors 4s linear infinite}

  /* ESTILOS SIN BRILLO (LEGIBILIDAD GARANTIZADA) */
  .led {
    font-family: system-ui, sans-serif; 
    font-weight: 700;
    
    color: var(--text); /* Usamos el color oscuro normal para m√°xima legibilidad */
    text-shadow: none; /* SIN BRILLO */
    
    background: var(--gift-bg-light-grey); 
    padding:15px 20px;
    border-radius:14px;
    font-size:26px; 
    white-space:pre-wrap;
    text-align:center;
    line-height:1.2;
    border:1px solid var(--gift-border-light-grey); 
  }
  
  .led .neon-blue-detail {
      color: var(--pure-neon-pink); 
      font-weight: 800;
      text-shadow: none; 
  }
  
  .submsg{margin-top:10px;color:var(--muted);font-size:16px;max-width:720px;text-align:center;font-weight:600}
  
  /* ESTILOS SIN BRILLO (LEGIBILIDAD GARANTIZADA) */
  .extra-msg{
    font-family: system-ui, sans-serif; 
    font-size: 28px;
    font-weight: 700;
    color: var(--elegant-gold); 
    margin-top: 20px;
    padding: 10px 15px;
    border-radius: 8px;
    border: 1px dashed var(--elegant-gold);
    display: none;
    line-height: 1.1;
    text-align: center;
    text-shadow: none; /* SIN BRILLO */
  }
  
  .photos{display:flex;flex-wrap:wrap;gap:12px;justify-content:center;margin-top:10px;padding-top:10px;border-top:1px solid #eee}
  #photosInit {display: none; margin-bottom: 20px;}
  #photosInit img {width: 150px; height: auto; object-fit: contain;}
  .photos img{width:110px;height:140px;object-fit:cover;border-radius:10px;box-shadow:0 5px 15px rgba(10,10,20,0.08); transition:transform .3s ease}
  .photos img:hover{transform:scale(1.05)}
  .video-wrap{width:100%;max-width:680px;border-radius:14px;overflow:hidden;background:rgba(255,255,255,0.98);box-shadow:0 8px 25px rgba(10,10,20,0.06);padding:10px;margin-top:15px}
  .video-wrap iframe{width:100%;height:380px;border:0;border-radius:10px}
  .cat-image-wrap {display:flex; justify-content:center; align-items:center; margin-top:15px; width:100%;}
  .cat-image-wrap img{max-width:180px; height:auto; border-radius:10px; box-shadow:0 5px 15px rgba(0,0,0,0.1); opacity: 0.9; filter:grayscale(20%) saturate(150%) hue-rotate(330deg); }
  .signature{margin-top:15px;text-align:center;font-weight:700;color:var(--text);font-size:18px}

  @media (max-width:600px){
    .wrap{padding:15px}
    .card{padding:25px 15px}
    .kitty-wrap{width:180px;height:180px}
    .kitty{width:130px;height:130px}
    .neon{font-size:26px;padding:6px 14px}
    .led{font-size:22px; padding:12px 16px}
    .submsg{font-size:14px}
    .extra-msg{font-size:26px;}
    .video-wrap iframe{height:250px}
    .photos img{width:100px;height:130px}
    .cat-image-wrap img{max-width:150px;} 
  }
</style>
</head>
<body>
<canvas class="estrellas-capa" id="fondo-estrellas"></canvas>

<div class="wrap">
  <canvas id="particles"></canvas>
  <div class="card" role="main">
    <div class="top-text"><span class="neon animated">¬°T√≥came! üëª</span></div> 

    <div class="center">
      <div id="entryBox" class="kitty-wrap" role="button" tabindex="0" aria-label="Entrada - Tocar la Hello Kitty para comenzar">
        <svg class="kitty" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <defs>
            <linearGradient id="gk" x1="0" x2="0" y1="0" y2="1"><stop offset="0" stop-color="#fff"/><stop offset="1" stop-color="#ffeef8"/></linearGradient>
            <filter id="s" x="-50%" y="-50%" width="200%" height="200%"><feDropShadow dx="0" dy="10" stdDeviation="12" flood-color="#ff9acb" flood-opacity="0.18"/></filter>
          </defs>
          <g filter="url(#s)">
            <ellipse cx="100" cy="100" rx="72" ry="70" fill="url(#gk)"/>
            <path d="M34 66 C18 44, 34 24, 62 44 Z" fill="#fff" stroke="#ffd6ea" stroke-width="2"/>
            <path d="M166 66 C182 44, 166 24, 138 44 Z" fill="#fff" stroke="#ffd6ea" stroke-width="2"/>
            <path d="M52 58 C44 50, 52 40, 62 50 Z" fill="#ffd3e8"/>
            <path d="M148 58 C156 50, 148 40, 138 50 Z" fill="#ffd3e8"/>
            <ellipse cx="80" cy="98" rx="7" ry="9" fill="#3a1833"/>
            <ellipse cx="120" cy="98" rx="7" ry="9" fill="#3a1833"/>
            <ellipse cx="100" cy="118" rx="6" ry="4" fill="#e86aa7"/>
            <path d="M44 110 L80 110" stroke="#d19fb5" stroke-width="2"/>
            <path d="M120 110 L156 110" stroke="#d19fb5" stroke-width="2"/>
            <g transform="translate(130,68)">
              <ellipse cx="0" cy="0" rx="18" ry="12" fill="#ff7ab6" />
              <path d="M-18 0 C-26 -6, -26 6, -18 0 Z" fill="#ff9ad7"/>
              <path d="M18 0 C26 -6, 26 6, 18 0 Z" fill="#ff9ad7"/>
              <circle cx="0" cy="0" r="6" fill="#fff6fb"/>
            </g>
          </g>
        </svg>
        <canvas id="sparklesEntry" class="sparkle" width="300" height="300" style="left:50%;top:50%;transform:translate(-50%,-50%);"></canvas>
      </div>
      
      <div id="photosInit" style="display:none;justify-content:center;gap:12px;margin-top:10px;">
          <img src="https://i.postimg.cc/zfq8DLRW/IMG-20251004-012129-729.jpg" alt="Feliz diablo pe" style="width:150px;height:auto;object-fit:contain;border-radius:10px;box-shadow:0 5px 15px rgba(10,10,20,0.08);">
      </div>

      <div id="gift2" class="reveal" aria-hidden="true">
        <div class="gift-box" id="box2" aria-live="polite">
          <div class="gift-lid"></div>
          <div class="gift-body">
            <div class="led" id="text2"></div>
            <div class="photos" id="photos2" style="display:none">
                <img src="https://i.postimg.cc/P5WdkbNZ/IMG-20251004-012132-370.jpg" alt="Foto Izquierda">
                <img src="https://i.postimg.cc/g0Gmcw6D/IMG-20251004-012131-687.jpg" alt="Foto Derecha">
                <img src="https://i.postimg.cc/ZqJ4Y9yL/IMG-20251003-233233-543.jpg" alt="Firma o Saludo">
            </div>
          </div>
        </div>
      </div>

      <div id="gift3" class="reveal" aria-hidden="true">
        <div class="gift-box" id="box3" aria-live="polite">
          <div class="gift-lid"></div>
          <div class="gift-body">
            <div class="led" id="text3"></div>
            <div class="submsg" id="sub3"></div>
            <div class="extra-msg" id="extraMessage"></div>
            <div class="video-wrap" id="dogVideo" style="display:none">
              <div id="player-yt"></div>
            </div>
            <div id="catImage" class="cat-image-wrap" style="display:none">
              <img src="https://i.postimg.cc/sXp4599g/IMG-20251004-215501-424.jpg" alt="Nueva Imagen de Firma">
            </div>
            <div class="signature" id="finalSig" style="display:none">‚Äî Khidir Karawita (Mario)</div>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>

<canvas class="estrellas-capa" id="frente-estrellas"></canvas>

<script>
// Funci√≥n de sonido (pling)
function playPling(){
  try{
    const ctx = new (window.AudioContext || window.webkitAudioContext)();
    const o = ctx.createOscillator();
    const g = ctx.createGain();
    o.type = 'sine';
    o.frequency.setValueAtTime(880, ctx.currentTime);
    o.frequency.exponentialRampToValueAtTime(1760, ctx.currentTime + 0.12);
    g.gain.setValueAtTime(0, ctx.currentTime);
    g.gain.linearRampToValueAtTime(0.12, ctx.currentTime + 0.01);
    g.gain.exponentialRampToValueAtTime(0.0001, ctx.currentTime + 0.6);
    o.connect(g); g.connect(ctx.destination);
    o.start();
    o.stop(ctx.currentTime + 0.65);
  }catch(e){ console.log('Audio failed',e) }
}

// Nuevo sonido para las Hello Kitties
function playMagicChime(){
  try{
    const ctx = new (window.AudioContext || window.webkitAudioContext)();
    const o = ctx.createOscillator();
    const g = ctx.createGain();
    o.type = 'triangle';
    o.frequency.setValueAtTime(1200, ctx.currentTime);
    g.gain.setValueAtTime(0, ctx.currentTime);
    g.gain.linearRampToValueAtTime(0.08, ctx.currentTime + 0.02);
    g.gain.exponentialRampToValueAtTime(0.0001, ctx.currentTime + 0.5);
    o.connect(g); g.connect(ctx.destination);
    o.start();
    o.stop(ctx.currentTime + 0.55);
  }catch(e){ console.log('Magic chime audio failed',e) }
}

// Funci√≥n de n√∫mero aleatorio
function rand(a,b){return Math.random()*(b-a)+a}

// Part√≠culas de fondo (el canvas original #particles)
const c = document.getElementById('particles');
const ctx = c.getContext('2d');
let W,H,parts=[];
function resize(){W=c.width=window.innerWidth;H=c.height=window.innerHeight}
function init(){
  parts=[];
  for(let i=0;i<140;i++){
    parts.push({
      x:rand(0,W),
      y:rand(0,H),
      r:rand(0.6,2.8), 
      vx:rand(-0.2,0.2),
      vy:rand(0.2, 0.8), 
      a:rand(0.2,0.7) 
    });
  }
}

function draw(){
  ctx.clearRect(0,0,W,H);
  for(let p of parts){
    ctx.beginPath();
    ctx.fillStyle='rgba(255, 16, 240, '+p.a+')'; 
    ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
    ctx.fill();
    p.x+=p.vx;
    p.y+=p.vy;
    if(p.y>H+10){
      p.y=-10;
      p.x=rand(0,W)
    }
  }
  requestAnimationFrame(draw)
}

resize();
init();
draw();
window.addEventListener('resize',()=>{resize();init()});

// Funci√≥n general para las capas de estrellas (fondo y frente)
function initStarLayer(canvasId, count, minR, maxR, minVY, maxVY, color){
  const canvas = document.getElementById(canvasId);
  const context = canvas.getContext('2d');
  let W, H;
  let stars = [];

  function resizeLayer(){
    W = canvas.width = window.innerWidth;
    H = canvas.height = window.innerHeight;
  }

  function initStars(){
    stars = [];
    for(let i=0; i<count; i++){
      stars.push({
        x: rand(0, W),
        y: rand(0, H),
        r: rand(minR, maxR),
        vx: rand(-0.1, 0.1),
        vy: rand(minVY, maxVY),
        a: rand(0.5, 1)
      });
    }
  }

  function drawStars(){
    context.clearRect(0, 0, W, H);
    for(let s of stars){
      context.beginPath();
      context.fillStyle = `${color.replace('A)', s.a + ')')}`; 
      context.arc(s.x, s.y, s.r, 0, Math.PI*2);
      context.fill();
      
      s.x += s.vx;
      s.y += s.vy;
      
      if(s.y > H + 10){
        s.y = -10;
        s.x = rand(0, W);
      }
    }
    requestAnimationFrame(drawStars);
  }

  resizeLayer();
  initStars();
  drawStars();
  window.addEventListener('resize', ()=>{ resizeLayer(); initStars(); });
}

// Inicializar capa de estrellas de FONDO (m√°s peque√±as, color tenue)
initStarLayer('fondo-estrellas', 80, 0.8, 1.8, 0.1, 0.4, 'rgba(255, 255, 255, A)');

// Inicializar capa de estrellas de FRENTE (m√°s grandes, color brillante)
initStarLayer('frente-estrellas', 50, 1.5, 3.5, 0.6, 1.2, 'rgba(255, 16, 240, A)');

// sparkles for entry
const sparkCan = document.getElementById('sparklesEntry');
const sctx = sparkCan.getContext('2d');
function resizeSpark(){sparkCan.width=300;sparkCan.height=300}
resizeSpark();
function emitSparklesAt(x,y,canvasCtx){
  const sparks=[];
  for(let i=0;i<40;i++){sparks.push({x:x,y:y,dx:rand(-4.2,4.2),dy:rand(-8,-2),r:rand(1,3.5),a:1})}
  let t=0;
  function frame(){
    canvasCtx.clearRect(0,0,sparkCan.width,sparkCan.height);
    for(let p of sparks){p.x+=p.dx;p.y+=p.dy;p.dy+=0.18;p.a-=0.02; canvasCtx.beginPath(); canvasCtx.fillStyle = 'rgba(255,255,255,'+p.a+')'; canvasCtx.arc(p.x,p.y,p.r,0,Math.PI*2); canvasCtx.fill()}
    t++; if(t<90) requestAnimationFrame(frame); else canvasCtx.clearRect(0,0,sparkCan.width,sparkCan.height);
  }
  frame();
}

// typing effect (Solo texto simple)
function typeText(el, text, speed=30, cb){
  el.textContent = '';
  let i=0;
  function step(){
    if(i<text.length){ el.textContent += text.charAt(i); i++; setTimeout(step, speed); }
    else if(cb) cb();
  }
  step();
}

// typing effect (Acepta HTML)
function typeTextHTML(el, htmlText, speed=30, cb){
  el.innerHTML = '';
  let i=0;
  
  function typeTextSimple(){
      if (i < htmlText.length) {
          const char = htmlText.charAt(i);
          if (char === '<') { 
              const tagEnd = htmlText.indexOf('>', i);
              if (tagEnd !== -1) {
                  const tag = htmlText.substring(i, tagEnd + 1);
                  el.innerHTML += tag.replace(/\n/g, '<br/>');
                  i = tagEnd + 1;
              } else {
                  el.innerHTML += char.replace(/\n/g, '<br/>');
                  i++;
              }
          } else { 
              el.innerHTML += char.replace(/\n/g, '<br/>');
              i++;
          }
          setTimeout(typeTextSimple, speed);
      } else if (cb) {
          cb();
      }
  }
  
  typeTextSimple();
}

// CONFETTI EFFECT
function launchConfetti(count = 50, targetElement) {
  const container = targetElement || document.body;
  for (let i = 0; i < count; i++) {
    const confetti = document.createElement('div');
    confetti.classList.add('confetti');
    confetti.style.left = Math.random() * 100 + 'vw';
    confetti.style.top = Math.random() * -10 + 'vh'; // Start above viewport
    confetti.style.animationDelay = Math.random() * 1 + 's';
    confetti.style.animationDuration = (Math.random() * 2 + 3) + 's'; // Slower fall
    confetti.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 70%)`; // Random colors
    container.appendChild(confetti);

    // Remove after animation to prevent DOM clutter
    confetti.addEventListener('animationend', () => confetti.remove());
  }
}

// sequence control
const photosInit = document.getElementById('photosInit'); 
const entryBox = document.getElementById('entryBox');
const gift2 = document.getElementById('gift2');
const gift3 = document.getElementById('gift3');
const box2 = document.getElementById('box2');
const box3 = document.getElementById('box3');
const text2 = document.getElementById('text2');
const photos2 = document.getElementById('photos2');
const text3 = document.getElementById('text3');
const sub3 = document.getElementById('sub3');
const extraMessage = document.getElementById('extraMessage');
const dogVideoWrap = document.getElementById('dogVideo');
const catImage = document.getElementById('catImage');
const finalSig = document.getElementById('finalSig');

let stepIndex = 0;

function openEntry(e){
  if(stepIndex!==0) return;
  stepIndex = 1;
  
  // 1. ANUNCIO INICIAL Y SONIDO
  playPling();
  emitSparklesAt(150,70,sctx);
  
  // Mostrar la imagen de Feliz Diablo Pe justo debajo del Kitty principal
  photosInit.style.display='flex';
  
  // 2. MOSTRAR Y ABRIR REGALO 1 (GIFT2)
  setTimeout(()=>{ 
    gift2.classList.add('show'); 
    gift2.style.display='flex'; 
    box2.classList.add('gift-open', 'glowing'); 
    playPling(); 
    launchConfetti(30, box2); 
  }, 700);
  
  /* Texto con la nueva fuente y azul ne√≥n en el detalle */
  const msg1 = "¬°Feliz Cumplea√±os Hanna! üéÅüéâ\nQue este nuevo ciclo de vida te traiga toda la alegr√≠a del mundo.\nEsto lo hice con esfuerzo y dedicaci√≥n, (<span class='neon-blue-detail'>as√≠ demostramos afecto los devs :v :v :v :v</span>)\nP√°sala genial hoy y que se cumplan tus deseos. üíñ";
  
  // 3. ESCRIBIR MENSAJE 1 Y MOSTRAR FOTOS DE KITTY (Solo las 3 restantes: 2 Kitties y Saludo)
  setTimeout(()=>{ 
    typeTextHTML(text2, msg1, 28, ()=>{ 
        photos2.style.display='flex'; 
        playMagicChime(); 
        
        setTimeout(()=>{ 
          // Ocultar la foto del Diablo Pe antes de cerrar la caja de regalo
          photosInit.style.display='none';
          box2.classList.remove('gift-open', 'glowing'); 
          gift2.classList.remove('show'); 
          playPling(); 
          
          setTimeout(()=>{ 
            gift2.style.display='none'; 
            gift3.classList.add('show'); 
            gift3.style.display='flex'; 
            box3.classList.add('gift-open', 'glowing'); 
            playPling(); 
            launchConfetti(40, box3); 
            
            /* Texto con la nueva fuente y azul ne√≥n en el detalle */
            const msg3 = "Que cada peque√±o momento de este d√≠a te haga sonre√≠r,\nporque las personas con buen coraz√≥n merecen d√≠as hermosos. <span class='neon-blue-detail'>üéÅ</span>";
            const sub = "¬°Tienes un alma preciosa y brillante, nunca lo olvides!";
            
            typeTextHTML(text3, msg3, 28, ()=>{ 
              sub3.textContent = ""; 
              typeText(sub3, sub, 20, ()=>{
                dogVideoWrap.style.display='block';
                loadYouTubePlayer();
              }); 
            });
          }, 700);
        }, 5000); 
    }); 
  }, 1200);
}

entryBox.addEventListener('click', openEntry);
entryBox.addEventListener('keypress',(e)=>{ if(e.key==='Enter' || e.key===' ') openEntry(); });

// YouTube API for dog video
let ytPlayer;
function loadYouTubePlayer(){
  const tag = document.createElement('script');
  tag.src = "https://www.youtube.com/iframe_api"; 
  const firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
  
  window.onYouTubeIframeAPIReady = function(){ window.ytReady = true; initPlayer(); }
}
function initPlayer(){
  if (typeof YT === 'undefined' || !YT.Player) {
    console.error("YouTube Player API no cargada. No se puede iniciar el video.");
    setTimeout(onVideoEndedFallback, 6000); 
    return;
  }
  
  ytPlayer = new YT.Player('player-yt', {
    height: '360',
    width: '640',
    videoId: 'zRJExOM0p3s',
    playerVars: { 'rel':0, 'playsinline':1 },
    events: {
      'onReady': function(e){ e.target.playVideo(); },
      'onStateChange': function(ev){
        if(ev.data==YT.PlayerState.ENDED){
          onVideoEndedFallback();
        }
      }
    }
  });
}

// Funci√≥n para continuar la secuencia cuando el video termina o como fallback
function onVideoEndedFallback(){
    playPling();
    box3.classList.remove('glowing'); 
    dogVideoWrap.style.display='none';
    catImage.style.display='block'; /* Mostrar la imagen del gato como firma */
    
    // Este es el mensaje final (ahora sin fuente ex√≥tica)
    const finalMsg = "Y un √∫ltimo secreto:\n¬°Eres la persona m√°s incre√≠ble que conozco!"; 
    extraMessage.style.display = 'block';
    typeText(extraMessage, finalMsg, 35, ()=>{
        finalSig.style.display='block';
        launchConfetti(50, document.body); 
    });
}


// accessibility: stop players when leaving
window.addEventListener('pagehide', ()=>{ try{ if(ytPlayer && ytPlayer.pauseVideo) ytPlayer.pauseVideo(); }catch(e){} });

</script>
</body>
</html>
